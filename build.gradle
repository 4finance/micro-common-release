buildscript {
    repositories {
        mavenLocal()
        jcenter()
    }
    dependencies {
        classpath "pl.allegro.tech.build:axion-release-plugin:0.9.9"
        classpath "org._10ne.gradle:rest-gradle-plugin:0.3.1"
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.0'
    }
}

apply plugin: 'pl.allegro.tech.build.axion-release'

scmVersion {
    tag {
        prefix = ''
    }
    createReleaseCommit = true
    releaseCommitMessage { version, position -> "release version: ${version}\n\n[ci skip]" }
}

project.group = 'com.ofg'
project.version = scmVersion.version

apply plugin: 'groovy'
apply from: 'src/main/resources/gradle/publish.gradle'
apply from: 'src/main/resources/gradle/release.gradle'

bintray {
    pkg {
        publish = false
    }
}

publishUploadedArtifacts {
    requestBody = [discard: 'false']
}

repositories {
    jcenter()
}

dependencies {
    compile gradleApi()
    compile localGroovy()

    compile "pl.allegro.tech.build:axion-release-plugin:0.9.9"
    compile "org._10ne.gradle:rest-gradle-plugin:0.3.1"
    compile 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.0'

    testCompile 'org.spockframework:spock-core:0.7-groovy-2.0'
    testCompile 'junit:junit:4.11'
}
